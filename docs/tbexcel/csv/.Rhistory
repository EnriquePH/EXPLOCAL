geom_bar(width = 1, stat = "identity") +
xlab("") +
ylab("") +
coord_polar(theta = "y") +
scale_fill_brewer(palette ="Blues") +
theme_minimal() +
geom_text(aes(y = Freq/2 + c(0, cumsum(Freq)[-length(Freq)]),
label = percent(Freq / sum(Freq))), size = 5)
#scale_y_continuous(labels = percent_format())
library(ggmap)
install.packages(ggmap)
install.packages("ggmap")
install.packages("ggmap")
install.packages("mapproj")
library(ggmap)
library(mapproj)
map <- get_map(location = 'Europe', zoom = 4)
ggmap(map)
library(ggmap)
library(mapproj)
map <- get_map(location = 'Spain', zoom = 4)
ggmap(map)
library(ggmap)
library(mapproj)
map <- get_map(location = 'Spain', zoom = 10)
ggmap(map)
library(maptools)
xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1],
IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))
plot(xx, border="blue", axes=TRUE, las=1)
text(coordinates(xx), labels=row.names(xx), cex=0.6)
as(xx, "data.frame")[1:5, 1:6]
xxx <- xx[xx$SID74 < 2,]
plot(xxx, border="red", add=TRUE)
tmpfl <- paste(tempdir(), "xxpoly", sep="/")
writePolyShape(xxx, tmpfl)
getinfo.shape(paste(tmpfl, ".shp", sep=""))
axx <- readShapePoly(tmpfl, proj4string=CRS("+proj=longlat +ellps=clrk66"))
plot(xxx, border="black", lwd=4)
plot(axx, border="yellow", lwd=1, add=TRUE)
unlink(paste(tmpfl, ".*", sep=""))
install.packages("mapdata")
help(mapdata)
??map_data
require("rgdal")
require("maptools")
require("ggplot2")
require("plyr")
require("rgdal")
require("maptools")
require("ggplot2")
require("plyr")
# read temperature data
setwd("<location if your data file>")
temp.data        <- read.csv(file = "levels.dat", header=TRUE, sep=" ", na.string="NA", dec=".", strip.white=TRUE)
temp.data$CODINE <- str_pad(temp.data$CODINE, width = 5, side = 'left', pad = '0')
# read municipality polygons
setwd("<location of your shapefile")
esp     <- readOGR(dsn=".", layer="poligonos_municipio_etrs89")
muni    <- subset(esp, esp$PROVINCIA == "46" | esp$PROVINCIA == "12" | esp$PROVINCIA == "3")
# fortify and merge: muni.df is used in ggplot
require("rgdal")
require("maptools")
require("ggplot2")
require("plyr")
library(rgdal)
install.packages("rgdal")
library(raster)
install.packages("raster")
library(rgdal)
library(raster)
# Read in data on major cities
cities <- read.csv("ciutats.csv", header=FALSE, encoding='UTF-8',
col.names=c('zona', 'codigoine', 'mean_lon', 'mean_lat', 'nombre'))
# Read in province polygons
pr <- subset(readOGR('.', 'poligonos_provincia_etrs89', encoding='UTF-8'),
CODINE %in% c('46', '12', '03'))
# Subset municipal polygons to selected provinces
muni <- subset(readOGR('.', 'poligonos_municipio_etrs89', encoding='UTF-8'),
library(XML)
library(dplyr)
library(tidyr)
library(ggplot2)
library(scales)
# Get the data
data.url <- "http://www.thewindpower.net/turbines_manufacturers_en.php"
doc <- htmlParse(data.url)
data <- readHTMLTable(doc,
colClasses = c("character", "character", "character"),
trim = TRUE,
which = 6
)
# Remove empty rows
data <- filter(data, Country != "")
View(data)
write.table(data,
file = "turbines_manufacturers_en.csv",
col.names = NA,
sep = ",")
# Plot Number of Turbine Manufacturers by Country
plot.data <- data %>%
group_by(Country) %>%
summarise(Freq = n()) %>%
mutate(Country = factor(Country, levels = rev(levels(Country))))
View(plot.data)
# A bar graph
# http://stackoverflow.com/questions/32160646/sort-country-names-in-ggplot2-bar-plot
ggplot(plot.data, aes(Country , Freq,  fill = Country)) +
coord_flip() +
geom_bar(stat = "identity", width = .90) +
xlab("") + # Set axis labels
ylab("") +
guides(fill = FALSE) +
ggtitle("Number of Turbine Manufacturers by Country") +
theme_minimal()
plot.data2 <- data %>%
separate(col = Remark,
into = c("Text", "Year"),
sep = " \\(",
remove = FALSE,
extra = "merge") %>%
mutate(Year, Year=gsub("\\)", "", Year)) %>%
mutate(Year, Year=gsub("\\#NA", NA , Year))
View(plot.data2)
plot.data3 <- plot.data2 %>%
group_by(Text) %>%
summarise(Freq = n())
View(plot.data3)
# A pie chart = stacked bar chart + polar coordinates
ggplot(plot.data3, aes(x = factor(1), y = Freq, fill = Text)) +
geom_bar(width = 1, stat = "identity") +
xlab("") +
ylab("") +
coord_polar(theta = "y") +
scale_fill_brewer(palette ="Blues") +
theme_minimal() +
geom_text(aes(y = Freq/2 + c(0, cumsum(Freq)[-length(Freq)]),
label = percent(Freq / sum(Freq))), size = 5)
library(dplyr)
library(tidyr)
library(ggplot2)
data <- "
Date       NO2         SO2          O3
2004-01-01  24.49864    2.756818    30.17857
2004-01-02  33.40000    3.912609    22.45514
2004-01-03  27.55435    5.654783    24.33342
2004-01-04  24.87391    8.910000    30.64569
2004-01-05  41.96348    10.893478   44.92825
2004-01-06  48.80913    13.417391   44.91305
2004-01-07  49.10217    16.808696   28.34968
2004-01-08  49.14217    26.273913   16.61955
2004-01-09  34.52261    8.438261    17.80235
2004-01-10  45.33087    7.955217    36.34493
"
gases.data <- read.delim(textConnection(data), sep = "")
gases.data <- gases.data %>%
mutate(Date = as.Date(Date, "%Y-%m-%d")) %>%
gather(key = Gas, value = Concentration, -Date)
View(gases.data)
ggplot(gases.data, aes(Date, Concentration, col = Gas)) +
ylab("Concentration") +
#geom_line() +
stat_smooth(method = loess) +
scale_colour_hue(
labels=c(expression(NO[2]),
expression(SO[2]),
expression(O[3])
)) +
# Remove legend title
theme(legend.title = element_blank())
library(ggplot2)
OEIS_bFile <- function(seq){
# Returns the bFile name associated to a OEIS sequence
#
# Args:
#   seq: OEIS sequence Id, consist on the letter A and 6 digits
#
# Returns:
#    A string with the OEIS' bFile name.
return(paste("b", substr(seq, 2, nchar(seq)), ".txt", sep = ""))
}
OEIS_sequence_url <- function(seq, bFile = FALSE){
# Returns bFile or sequence url in OEIS
#
# Args:
#   seq: OEIS sequence Id
#   bFile: if TRUE returns bfile url, and sequence url otherwise
#
# Returns:
#    A string with the OEIS url required
OEIS_url <- "http://oeis.org"
if(bFile){
# bFile url
return(paste(OEIS_url, seq, OEIS_bFile(seq), sep = "/"))
} else {
# Sequence url
return(paste(OEIS_url, seq, sep = "/"))
}
}
# Dedekind Psi Function
my_sequence <- "A001615"
OEIS_bFile(my_sequence)
OEIS_sequence_url(my_sequence)
my_bFile <- OEIS_sequence_url(my_sequence, bFile = TRUE)
data <- read.csv(my_bFile,
header = FALSE,
sep = " ",
col.names = c("n", my_sequence)
)
#View(data)
ggplot(data, aes(x = n, y = eval(parse(text = my_sequence)))) +
geom_point(size = .1, colour = "red") +
ylab(my_sequence)
remove.packages("manipulate")
install.packages("manipulate")
library(ggplot2)
my_labels <- expression(0, pi / 2, pi, 3 * pi / 4, 2 * pi)
ggplot(data.frame(x = c(0, 2*pi)), aes(x)) +
stat_function(fun = sin, colour = "red", size = 2) +
stat_function(fun = cos, colour = "blue", size = 2) +
scale_x_continuous(breaks = 0:4  * pi / 2,
labels = my_labels) +
ylab("f(x)")
x <- c(0.8, 0.47, 0.51, 0.73, 0.36, 0.58, 0.57, 0.85, 0.44, 0.42)
y <- c(1.39, 0.72, 1.55, 0.48, 1.19, -1.59, 1.23, -0.65, 1.49, 0.05)
fit<- lm( y ~ x - 1 )
summary(fit) # 0.8263
fit$coefficients
data(mtcars)
fit <- lm(mpg ~ wt, mtcars)
summary(fit) # -5.3445
fit$coefficients
library(ggplot2)
ggplot(fit, aec(x = mpg, y = wt)) +
geom_line()
ggplot(fit, aes(x = mpg, y = wt)) +
geom_line()
ggplot(fit, aes(x = mpg, y = wt)) +
geom_point()
ggplot(fit, aes(x = mpg, y = wt)) +
geom_point()
ggplot(fit, aes(x = mpg, y = wt)) +
geom_point() +
stat_smooth(method="lm", se=FALSE)
fit$coefficients
ggplot(fit, aes(x = mpg, y = wt)) +
geom_point() +
stat_smooth(method = "lm", se = FALSE)
corOfYandX <- 0.5
sdYoverX <- 2
beta1 <- corOfYandX*sdYoverX
beta1 # 1
library(AppliedPredictiveModeling)
librar(AppliedPredictiveModeling)
install.packages("AppliedPredictiveModeling")
library(swirl)
swirl()
2
swirl()
swirl()
install_from_swirl("Regression Models")
rm(list=ls())
library(swirl)
swirl()
detach("package:swirl", unload=TRUE)
remove.packages("swirl")
install.packages("swirl")
swirl()
library(swirl)
swirl()
install_from_swirl("Regression_Models")
uninstall_course("Regression_Models")
uninstall_course("Regression Models")
swirl()
remove.packages("swirl")
install.packages("swirl")
install.packages("swirl")
library(swirl)
swirl()
install_from_swirl("R_Programming")
library(dplyr)
library(tidyr)
library(ggplot2)
entalp.file <- "ENTALP.CSV"
entalp.data <- read.csv(entalp.file,
dec = ",",
sep = ";"
)
View(entalp.data)
library(swirl)
which_course="R Programming")
install_course_zip("C:/CODE/R/R-3.2.2/library/swirl/Courses/swirl_courses-master.zip",
multi=TRUE,
which_course="R Programming")
install_course_zip("C:/CODE/R/R-3.2.2/library/swirl/Courses/swirl_courses-master.zip",
multi=TRUE,
which_course="R Programming")
install_course_zip("C:/CODE/R/R-3.2.2/library/swirl/Courses/swirl_courses-master.zip",
multi=TRUE,
which_course="Regression Models")
swirl()
source('~/.active-rstudio-document', echo=TRUE)
lm(y ~ x)
summary(lm(y ~ x))
lm(y ~ x)$p-value
lm(y ~ x)$Coefficients
lm(y ~ x)$coefficients
lm(y ~ x)$'Pr(>F)'
lm(y ~ x)$coefficients[,4]
lm(y ~ x)$coefficients[ ,3]
lm(y ~ x)$coefficients[ ,2]
lm(y ~ x)$coefficients[4]
lm(y ~ x)$coefficients[1]
lm(y ~ x)$coefficients[2]
fit <- lm(y ~ x)
summary(fit)
coef(summary(fit))
coef(summary(fit))["Pr(>|t|)"]
coef(summary(fit))[,"Pr(>|t|)"]
coef(summary(fit))[2,"Pr(>|t|)"]
coef(summary(fit))[2, "Pr(>|t|)"]
p.value <- coef(summary(fit))[2, "Pr(>|t|)"]
print(p.value)
p.value <- coef(summary(fit))[2, "Pr(>|t|)"]
print(p.value)
p.value
coef(summary(fit))
summary(fit)
coef(summary(fit))
summary(fit)
rse <- summary(fit)$sigma
print(rse)
plot(x,y)
abline(fit,col="red")
remove.packages("manipulate")
install.packages("manipulate")
swirl()
library(swirl)
swirl()
plot(child ~ parent, galton)
plot(jitter(child,4) ~ parent,galton)
regrline <- lm(child ~ parent, galton)
abline(regrline, lwd=3, col='red')
summary(regrline)
lm(child ~ parent, galton)
fit <- lm(child ~ parent, galton)
summary(fit)
fit$residuals
mean(fit$residuals)
cov(fit$residuals, galton$parent)
ols.ic <- fit$coef
ols.ic <- fit$coef[1]
ols.slope <- fit$coef[2]
rhs - lhs
lhs - rhs
all.equal(lhs, rhs)
varChild <- var(galton$child)
varRes <- fit$residuals
varRes <- var(fit$residuals)
varEst <- var(ols.ic + ols.Slope * galton$child)
varEst <- var(ols.ic + ols.slope * galton$child)
varEst <- var(est(ols.slope, ols.ic))
all.equal(varChild, varRes + varEst)
efit <- lm(accel ~ mag+dist, attenu)
mean(efit$residuals)
cov(efit$residuals, attenu$mag)
cov(efit$residuals, attenu$dist)
c(1:2, expression)
c(1:3, as.expression)
lapply(c(1:3), as.expression
)
lapply(c(1:3), as.expression)
sapply(c(1:3), as.expression)
apply(c(1:3), as.expression)
apply(c(1:3), FUN=as.expression)
apply(c(1:3),3, FUN=as.expression)
lapply(c(1:3), as.expression)
c(a:v)
c(char(1))
unlist(lapply(c(1:3), expression))
unlist(lapply(c(1:3), expression))
l.ex <- list(a = list(1:5, LETTERS[1:5]), b = "Z", c = NA)
l.ex
unlist(l.ex, recursive = FALSE)
unlist(l.ex, recursive = TRUE)
unlist(lapply(c(1:4), as.expression), recursive = TRUE)
unlist(lapply(c(1:4), expression), recursive = TRUE)
unlist(lapply(c(1:4), expression), recursive = TRUE)
unlist(lapply(c(1:4), as.expression), recursive = TRUE)
unlist(sapply(c(1:4), as.expression), recursive = TRUE)
unlist(lapply(c(1:4), as.expression), recursive = TRUE)
unlist(lapply(c("a[1]","a[2]"), as.expression), recursive = TRUE)
unlist(lapply(c("a[1]","a[2]"), as.expression), recursive = TRUE)
unlist(lapply(c("a[1]","a[2]"), expression), recursive = TRUE)
unlist(lapply(c("a[1]","a[2]"), as.expression), recursive = TRUE)
unlist(c("a[1]","a[2]"), recursive = TRUE)
for(i in c(1:3)){
print(i)
}
for(i in c(1:3)){
print(expression(i))
}
c(1:3, expression)
c(1:3, expression)
c(1:3, "expression")
x<-1:30
x
which(x %% 5 == 0)
sapply(1:3, function(x) expression(x))
lapply(1:3, function(x) expression(x))
seq(from = 4.5, to = 2.5, by = -0.5)
seq(from = 4, to = 2.5, by = -0.5)
seq(from = 4, to = 2.5, by = -0.33)
rep(expression, 3)
rep(2, 3)
ChemmineR
install.packages("ChemmineR")
library(dplyr)
library(tidyr)
library(ggplot2)
data <- "
Date       NO2         SO2          O3
2004-01-01  24.49864    2.756818    30.17857
2004-01-02  33.40000    3.912609    22.45514
2004-01-03  27.55435    5.654783    24.33342
2004-01-04  24.87391    8.910000    30.64569
2004-01-05  41.96348    10.893478   44.92825
2004-01-06  48.80913    13.417391   44.91305
2004-01-07  49.10217    16.808696   28.34968
2004-01-08  49.14217    26.273913   16.61955
2004-01-09  34.52261    8.438261    17.80235
2004-01-10  45.33087    7.955217    36.34493
"
gases.data <- read.delim(textConnection(data), sep = "")
gases.data <- gases.data %>%
mutate(Date = as.Date(Date, "%Y-%m-%d")) %>%
gather(key = Gas, value = Concentration, -Date)
View(gases.data)
ggplot(gases.data, aes(Date, Concentration, col = Gas)) +
ylab("Concentration") +
#geom_line() +
stat_smooth(method = loess) +
scale_colour_hue(
labels=c(expression(NO[2]),
expression(SO[2]),
expression(O[3])
)) +
# Remove legend title
theme(legend.title = element_blank())
plot.labels <- c(expression(NO[2]),
expression(SO[2]),
expression(O[3])
)
ggplot(gases.data, aes(Date, Concentration, col = Gas)) +
ylab("Concentration") +
#geom_line() +
stat_smooth(method = loess) +
scale_colour_hue(labels = plot.labels) +
# Remove legend title
theme(legend.title = element_blank())
plot.labels
plot.labels <- expression(NO[2], SO[2], O[3])
ggplot(gases.data, aes(Date, Concentration, col = Gas)) +
ylab("Concentration") +
#geom_line() +
stat_smooth(method = loess) +
scale_colour_hue(labels = plot.labels) +
# Remove legend title
theme(legend.title = element_blank())
expression(NO[2], SO[2], O[3])
expression("NO[2]", "SO[2]", "O[3]")
cols(gases.data)
col(gases.data)
col.names(gases.data)
colnames(gases.data)
eval(paste(text = "NO[2]")
eval(paste(text = "NO[2]"))
eval(paste(text = "expression(NO[2])"))
eval(parse(text = "expression(NO[2])"))
install.packages(c("evaluate", "formatR", "highr"))
halides <- filter(explosion.products, grepl("H$", FORMULA))
halides.entalp.data <- entalp.data %>%
setwd("C:/CODE/mycode/02-PROJECT1500/09-myprojects/05-EXPLOCAL/Explocal-GIT/docs/tbexcel/csv")
source('C:/CODE/mycode/02-PROJECT1500/09-myprojects/05-EXPLOCAL/Explocal-GIT/docs/tbexcel/csv/EXPLOCAL.R', echo=TRUE)
setwd("C:/CODE/mycode/02-PROJECT1500/09-myprojects/05-EXPLOCAL/Explocal-GIT/docs/tbexcel/csv")
source('C:/CODE/mycode/02-PROJECT1500/09-myprojects/05-EXPLOCAL/Explocal-GIT/docs/tbexcel/csv/EXPLOCAL.R', echo=TRUE)
sesquioxides <- filter(explosion.products,  grepl("2O3", FORMULA))
sesquioxides.entalp.data <- entalp.data %>%
filter(FORMULA %in% sesquioxides$FORMULA)
sesquioxides.labels <- lapply(sesquioxides$FORMULA, formula.expression)
ggplot(sesquioxides.entalp.data, aes(TEMP , ENTHALPY, col = FORMULA)) +
ggtitle("Sesquioxides") +
xlab("Temperature (K)") +
ylab("H(T)-H(298) kcal/mol") +
scale_colour_hue(labels = sesquioxides.labels) +
geom_line()
ylab.k1.plot <- expression(K[1])
label.k1.plot <- "K[1] == frac(P[CO], P[H[2]*O]) * frac(P[CO[2]], P[H[2]])"
ggplot(k1.data, aes(x = TEMP, y = K1)) +
xlab("Temperature (K)") +
ylab(ylab.k1.plot) +
theme(axis.title.y = element_text(angle = 0)) +
annotate("text", x = 4000, y = 3.5, label = label.k1.plot, parse = TRUE) +
geom_line(size = 1, colour = "blue")
ylab.k2.plot <- expression(K[2])
label.k2.plot <- "K[2] == frac(P[CO]^2, P[CO[2]])"
ggplot(k1.data, aes(x = TEMP, y = K2)) +
xlab("Temperature (K)") +
ylab(ylab.k2.plot) +
theme(axis.title.y = element_text(angle = 0)) +
annotate("text", x = 2000, y = 5000, label = label.k2.plot, parse = TRUE) +
geom_line(size = 1, colour = "red")
